{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/zacharymyers/Desktop/spotify_frontend/Spotify-Project-Frontend/src/containers/Analytics.js\";\nimport React, { Component } from 'react';\nexport const authEndpoint = 'https://accounts.spotify.com/authorize';\n\nclass SpotifyAuth extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isAuthenticatedWithSpotify: false // menu: this.props.userId.menu\n\n    };\n    this.state.handleRedirect = this.handleRedirect.bind(this);\n  }\n\n  generateRandomString(length) {\n    let text = '';\n    const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\n    for (let i = 0; i < length; i++) {\n      text += possible.charAt(Math.floor(Math.random() * possible.length));\n    }\n\n    return text;\n  }\n\n  getHashParams() {\n    const hashParams = {};\n    const r = /([^&;=]+)=?([^&;]*)/g;\n    const q = window.location.hash.substring(1);\n    let e = r.exec(q);\n\n    while (e) {\n      hashParams[e[1]] = decodeURIComponent(e[2]);\n      e = r.exec(q);\n    }\n\n    return hashParams;\n  }\n\n  componentDidMount() {\n    //if (this.props.isAuthenticated) {\n    const params = this.getHashParams();\n    const access_token = params.access_token;\n    const state = params.state;\n    const storedState = localStorage.getItem('stateKey');\n\n    if (window.localStorage.getItem('spotifyAuthToken')) {\n      this.setState({\n        isAuthenticatedWithSpotify: true\n      });\n    }\n\n    if (access_token && (state == null || state !== storedState)) {\n      alert('Click \"ok\" to finish authentication with Spotify');\n    } else {\n      localStorage.removeItem('stateKey');\n    }\n\n    console.log(access_token); // DO STUFF WITH ACCEES TOKEN HERE\n    // this.props.onConnectWithSpotify(access_token);\n  }\n\n  handleRedirect(event) {\n    event.preventDefault();\n    const params = this.getHashParams();\n    const access_token = params.access_token;\n    const state = this.generateRandomString(16);\n    localStorage.setItem('stateKey', state);\n    localStorage.setItem('spotifyAuthToken', access_token);\n    let url = 'https://accounts.spotify.com/authorize' + '?response_type=code' + '&client_id=5403b9779ca549be90741adbe53d1b09' + '&scope=' + encodeURIComponent('user-read-private%20user-top-read%20user-library-read%20user-follow-read') + '&redirect_uri=' + encodeURIComponent('http://localhost:3000/analytics-vis');\n    window.location = url;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"button_container\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"sp_button\",\n        onClick: event => this.handleRedirect(event),\n        children: /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"LINK YOUR SPOTIFY ACCOUNT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default SpotifyAuth;","map":{"version":3,"sources":["/Users/zacharymyers/Desktop/spotify_frontend/Spotify-Project-Frontend/src/containers/Analytics.js"],"names":["React","Component","authEndpoint","SpotifyAuth","constructor","props","state","isAuthenticatedWithSpotify","handleRedirect","bind","generateRandomString","length","text","possible","i","charAt","Math","floor","random","getHashParams","hashParams","r","q","window","location","hash","substring","e","exec","decodeURIComponent","componentDidMount","params","access_token","storedState","localStorage","getItem","setState","alert","removeItem","console","log","event","preventDefault","setItem","url","encodeURIComponent","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nexport const authEndpoint = 'https://accounts.spotify.com/authorize';\nclass SpotifyAuth extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isAuthenticatedWithSpotify: false\n      // menu: this.props.userId.menu\n    };\n    this.state.handleRedirect = this.handleRedirect.bind(this);\n  }\n\n  generateRandomString(length) {\n    let text = '';\n    const possible =\n      'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    for (let i = 0; i < length; i++) {\n      text += possible.charAt(Math.floor(Math.random() * possible.length));\n    }\n    return text;\n  }\n\n  getHashParams() {\n    const hashParams = {};\n    const r = /([^&;=]+)=?([^&;]*)/g;\n    const q = window.location.hash.substring(1);\n    let e = r.exec(q);\n    while (e) {\n      hashParams[e[1]] = decodeURIComponent(e[2]);\n      e = r.exec(q);\n    }\n    return hashParams;\n  }\n\n  componentDidMount() {\n    //if (this.props.isAuthenticated) {\n    const params = this.getHashParams();\n\n    const access_token = params.access_token;\n    const state = params.state;\n    const storedState = localStorage.getItem('stateKey');\n\n    if (window.localStorage.getItem('spotifyAuthToken')) {\n      this.setState({ isAuthenticatedWithSpotify: true });\n    }\n    if (access_token && (state == null || state !== storedState)) {\n      alert('Click \"ok\" to finish authentication with Spotify');\n    } else {\n      localStorage.removeItem('stateKey');\n    }\n    console.log(access_token);\n    // DO STUFF WITH ACCEES TOKEN HERE\n    // this.props.onConnectWithSpotify(access_token);\n  }\n\n  handleRedirect(event) {\n    event.preventDefault();\n\n    const params = this.getHashParams();\n    const access_token = params.access_token;\n\n    const state = this.generateRandomString(16);\n    localStorage.setItem('stateKey', state);\n    localStorage.setItem('spotifyAuthToken', access_token);\n    let url =\n      'https://accounts.spotify.com/authorize' +\n      '?response_type=code' +\n      '&client_id=5403b9779ca549be90741adbe53d1b09' +\n      '&scope=' +\n      encodeURIComponent('user-read-private%20user-top-read%20user-library-read%20user-follow-read') +\n      '&redirect_uri=' +\n      encodeURIComponent('http://localhost:3000/analytics-vis');\n    window.location = url;\n  }\n\n  render() {\n    return (\n      <div className=\"button_container\">\n        <button\n          className=\"sp_button\"\n          onClick={(event) => this.handleRedirect(event)}\n        >\n          <strong>LINK YOUR SPOTIFY ACCOUNT</strong>\n        </button>\n      </div>\n    );\n  }\n}\n\nexport default SpotifyAuth;"]},"metadata":{},"sourceType":"module"}